<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hoja de Ruta</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  {% include '_sidebar.html' %}
  <div class="container">
    <h2 style="margin:0 0 12px;">Hoja de Ruta — {{ hoja.nombre }}</h2>
    <div class="hoja-card" style="padding:8px 12px;">
      <div style="display:flex;gap:12px;">
        <div style="flex:1; border:1px solid #000;">
          <div style="display:flex; background:#00c6d4; color:#000; font-weight:800;">
            <div style="width:90px; padding:6px; background:#fff; display:flex;align-items:center;justify-content:center;">LOGO</div>
            <div style="flex:1; padding:12px 8px; text-align:center; font-size:20px;">HOJA DE RUTA MAQUINADO (ALMACEN PRODUCTO TERMINADO)</div>
            <div style="width:220px; padding:6px; text-align:left;">
              <div style="font-size:12px;">FOLIO M.P</div>
              <div style="font-size:12px;">REVISION: {{ hoja.revision or '' }}</div>
              <div style="font-size:12px;">HORA DE INGRESO ALMACEN P.T</div>
            </div>
          </div>
          <div style="display:flex; border-bottom:3px solid #000;">
            <div style="flex:0 0 120px; border-right:1px solid #000; padding:8px; background:#dff0ff; text-align:center;">CALIDAD:<br>{{ hoja.calidad or '' }}</div>
            <div style="flex:0 0 100px; border-right:1px solid #000; padding:8px; text-align:center;">{{ hoja.pn or '' }}</div>
            <div style="flex:1; padding:8px; text-align:center; background:#00b0d6; color:#fff; font-weight:700;">{{ hoja.nombre }}</div>
            <div style="flex:0 0 140px; border-left:1px solid #000; padding:8px; text-align:center;">FECHA DE SALIDA<br>{{ hoja.fecha_salida[:10] if hoja.fecha_salida }}</div>
          </div>
          <div style="display:flex;">
            <div style="flex:1;">
              <table style="width:100%; border-collapse:collapse;">
                <thead>
                  <tr style="background:#d6eaf8;">
                    <th style="border:1px solid #000; width:40px;">PROC.</th>
                    <th style="border:1px solid #000; width:100px;">C.T.</th>
                    <th style="border:1px solid #000;">OPERACIÓN</th>
                    <th style="border:1px solid #000; width:90px;">T/E</th>
                    <th style="border:1px solid #000; width:90px;">T/CT</th>
                    <th style="border:1px solid #000; width:90px;">T/CO</th>
                    <th style="border:1px solid #000; width:90px;">T/O</th>
                    <th style="border:1px solid #000; width:110px;">TOTAL DE PIEZAS</th>
                    <th style="border:1px solid #000; width:120px;">OPERADOR</th>
                    <th style="border:1px solid #000; width:100px;">EFICIENCIA</th>
                    <th style="border:1px solid #000; width:150px;">FIRMA DEL SUPERVISOR</th>
                  </tr>
                </thead>
                <tbody>
                  {% for i in range(1,16) %}
                    {% set est_list = (hoja.estaciones|selectattr('orden','equalto',i)|list) %}
                    {% set est = est_list[0] if est_list|length > 0 else None %}
                  <tr style="height:36px;">
                    <td style="border:1px solid #000; text-align:center;">{{ i }}°</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.centro_trabajo if est else '' }}</td>
                    <td style="border:1px solid #000; padding:6px;">{{ est.operacion if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.t_e if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.t_tct if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.t_tco if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.t_to if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.total_piezas if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.operador if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;">{{ est.eficiencia if est else '' }}</td>
                    <td style="border:1px solid #000; text-align:center;"></td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
              <div style="display:flex; margin-top:8px;">
                <div style="flex:1; background:#cfe2f3; padding:8px; border:1px solid #000;">TOTAL DE TIEMPO<br>{{ hoja.total_tiempo or '' }}</div>
                <div style="width:160px; background:#cfe2f3; padding:8px; border:1px solid #000; text-align:center;">DIAS A LABORAR<br>{{ hoja.dias_a_laborar or '' }}</div>
                <div style="width:160px; background:#cfe2f3; padding:8px; border:1px solid #000; text-align:center;">FECHA DE TERMINO<br>{{ hoja.fecha_termino[:10] if hoja.fecha_termino }}</div>
              </div>
              <div style="display:flex; gap:12px; margin-top:8px;">
                <div style="flex:1; border:1px solid #000; padding:8px; min-height:100px;">APROBADA<br>{{ 'SI' if hoja.aprobada else '' }}</div>
                <div style="flex:1; border:1px solid #000; padding:8px; min-height:100px;">RECHAZADA<br>{{ 'SI' if hoja.rechazada else '' }}</div>
                <div style="flex:1; border:1px solid #000; padding:8px; min-height:100px;">SCRAP<br>{{ 'SI' if hoja.scrap else '' }}</div>
                <div style="flex:1; border:1px solid #000; padding:8px; min-height:100px;">RETRABAJO<br>{{ 'SI' if hoja.retrabajo else '' }}</div>
              </div>
              <div style="display:flex; gap:12px; margin-top:8px;">
                <div style="flex:1; border:1px solid #000; padding:8px;">ING: {{ hoja.supervisor or '' }}<br>FIRMA:</div>
                <div style="flex:1; border:1px solid #000; padding:8px;">ING: {{ hoja.operador or '' }}<br>FIRMA:</div>
                <div style="flex:2; border:1px solid #000; padding:8px;">COMENTARIOS</div>
              </div>
            </div>
            <div style="width:220px; border-left:3px solid #000;">
              <div style="border-bottom:1px solid #000; padding:8px; text-align:center; background:#e9f6fb;">CANTIDAD DE PIEZAS<br><span style="font-size:28px; font-weight:800;">{{ hoja.cantidad_piezas or '' }}</span></div>
              <div style="padding:8px; border-bottom:1px dashed #999;">ORDEN DE TRABAJO H.R<br>{{ hoja.orden_trabajo_hr or '' }}</div>
              <div style="padding:8px; border-bottom:1px dashed #999;">ORDEN DE TRABAJO P.T<br>{{ hoja.orden_trabajo_pt or '' }}</div>
              <div style="padding:8px; border-bottom:1px dashed #999;">ALMACEN<br>{{ hoja.almacen or '' }}</div>
              <div style="padding:8px; border-bottom:1px dashed #999;">NO. SIN ORDEN<br>{{ hoja.no_sin_orden or '' }}</div>
              <div style="padding:8px; border-bottom:1px dashed #999; background:#cfe2f3; text-align:center;">MATERIA PRIMA<br>{{ hoja.materia_prima or '' }}</div>
              <div style="height:80px; background:#00ff44; margin:8px; border:2px solid #000;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
